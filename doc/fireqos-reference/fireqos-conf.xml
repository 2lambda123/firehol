<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
                 "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<!-- For license information see chapter-intro.xml -->
<refentry id="fireqos.conf">

<refmeta>
<refentrytitle>FireQOS configuration: fireqos.conf</refentrytitle>
<manvolnum>5</manvolnum>
</refmeta>

<refnamediv>
<refdescriptor>fireqos.conf</refdescriptor>
<refname>fireqos.conf</refname>
<refpurpose>FireQOS configuration file</refpurpose>
</refnamediv>

<refsect1><title>Description</title>
  <para>
    This file defines the traffic shaping that will be applied
    by <xref linkend="fireqos"/>.
  </para>

  <para>
    The default configuration file is
    <filename>/etc/firehol/fireqos.conf</filename>. It can be overriden
    from the command line.
  </para>

  <para>
    A configuration consists of a number of input and output
    <command>interface</command> definitions (see
    <xref linkend="qos-interface"/>). Each <command>interface</command>
    can define any number of (optionally nested) <command>class</command>es
    (see  <xref linkend="qos-class"/>) which shape the traffic which
    they <command>match</command> (see <xref linkend="qos-match"/>).
  </para>
</refsect1>

<refsect1><title>Speed Units</title>
  <para>
    In <application>FireQOS</application>, speeds can be expressed
    in the following units:
  </para>

  <variablelist>
    <varlistentry><term><replaceable>#</replaceable><option>bps</option></term>
      <listitem>
        <para><replaceable>#</replaceable> bytes per second</para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>#</replaceable><option>kbps</option></term>
                  <term><replaceable>#</replaceable><option>Kbps</option></term>
      <listitem>
        <para><replaceable>#</replaceable> kilobytes per second</para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>#</replaceable><option>mbps</option></term>
                  <term><replaceable>#</replaceable><option>Mbps</option></term>
      <listitem>
        <para><replaceable>#</replaceable> megabytes per second</para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>#</replaceable><option>gbps</option></term>
                  <term><replaceable>#</replaceable><option>Gbps</option></term>
      <listitem>
        <para><replaceable>#</replaceable> gigabytes per second</para>
      </listitem>
    </varlistentry>

    <varlistentry><term><replaceable>#</replaceable><option>bit</option></term>
      <listitem>
        <para><replaceable>#</replaceable> bits per second</para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>#</replaceable><option>kbit</option></term>
                  <term><replaceable>#</replaceable><option>Kbit</option></term>
                  <term><replaceable>#</replaceable></term>
      <listitem>
        <para><replaceable>#</replaceable> kilobits per second (default)</para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>#</replaceable><option>mbit</option></term>
                  <term><replaceable>#</replaceable><option>Mbit</option></term>
      <listitem>
        <para><replaceable>#</replaceable> megabits per second</para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>#</replaceable><option>gbit</option></term>
                  <term><replaceable>#</replaceable><option>Gbit</option></term>
      <listitem>
        <para><replaceable>#</replaceable> gigabits per second</para>
      </listitem>
    </varlistentry>

    <varlistentry><term><replaceable>#</replaceable><option>%</option></term>
      <listitem>
        <para>
          In a <command>class</command>, uses this percentage of
          the enclosing <option>rate</option>.
       </para>
      </listitem>
    </varlistentry>
  </variablelist>
  <note>
    <para>
      The default, <option>kbit</option> is different to
      <command>tc</command> which assumes bytes per second when no unit is
      specified.
    </para>
  </note>
</refsect1>

<refsect1><title>Example</title>
  <programlisting>
# incoming traffic from my ADSL router
interface eth2 adsl-in input rate 10500kbit adsl remote pppoe-llc
  class voip commit 100kbit pfifo
    match udp ports 5060,10000:10100 # asterisk sip and rtp
    match udp ports 16393:16402 # apple facetime

  class realtime commit 10%
    match tcp port 22,1195:1198,1753 # ssh, openvpn, pptp
    match udp port 53 # dns
    match proto GRE
    match icmp
    match tcp syn
    match tcp ack

  class clients commit 10%
    match tcp port 20,21,25,80,143,443,465,873,993 # mail, web, ftp, etc

  # unmatched traffic goes here ('default' is a special name)
  class default max 90%

  # I define torrents beneath the default class, because I want them
  # to slow down when the default class is willing to get bandwidth
  class torrents max 90%
    match port 51414 # my torrent client

# outgoing traffic to my ADSL router
interface eth2 adsl-out output rate 800kbit adsl remote pppoe-llc
  class voip commit 100kbit pfifo
    match udp ports 5060,10000:10100 # asterisk sip and rtp
    match udp ports 16393:16402 # apple facetime

  class realtime commit 10%
    match tcp port 22,1195:1198,1753 # ssh, openvpn, pptp
    match udp port 53 # dns
    match proto GRE
    match icmp
    match tcp syn
    match tcp ack

  class clients commit 10%
    match tcp port 20,21,25,80,143,443,465,873,993 # mail, web, ftp, etc

  # unmatched traffic goes here ('default' is a special name)
  class default max 90%

  # I define torrents, beneath the default class, because I want them
  # to slow down when the default class is willing to get bandwidth
   class torrents max 90%
       match port 51414 # my torrent client
  </programlisting>
</refsect1>

<refsect1><title>See Also</title>
  <simplelist type="vert">
    <member><xref linkend="fireqos"/></member>
    <member><xref linkend="qos-interface"/></member>
    <member>FireHOL Manual: firehol-manual.pdf</member>
    <member><ulink url="http://firehol.org/">FireHOL Online Documentation</ulink></member>
  </simplelist>
</refsect1>

</refentry>
