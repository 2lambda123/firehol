<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
                 "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<!-- For license information see chapter-intro.xml -->
<refentry id="qos-interface">

<refmeta>
<refentrytitle>interface definition: fireqos-interface</refentrytitle>
<manvolnum>5</manvolnum>
</refmeta>

<refnamediv>
<refdescriptor>fireqos-interface</refdescriptor>
<refname>fireqos-interface</refname>
<refname>fireqos-interface4</refname>
<refname>fireqos-interface6</refname>
<refname>fireqos-interface46</refname>
<refpurpose>create an interface definition</refpurpose>
</refnamediv>

<refsynopsisdiv>
  <cmdsynopsis>
    <command>interface|interface4</command>
    <arg choice="plain"><replaceable>device</replaceable></arg>
    <arg choice="plain"><replaceable>name</replaceable></arg>
    <arg choice="plain"><replaceable>direction</replaceable></arg>
    <arg choice="opt"><replaceable>optional-class-params</replaceable></arg>
    <arg choice="plain">
      <group choice="req">
        <arg choice="plain">rate</arg>
        <arg choice="plain">commit</arg>
        <arg choice="plain">min</arg>
      </group>
      <arg choice="plain"><replaceable>speed</replaceable></arg>
    </arg>
  </cmdsynopsis>
  <cmdsynopsis>
    <command>interface46</command>
    <arg choice="plain"><replaceable>...</replaceable></arg>
  </cmdsynopsis>
  <cmdsynopsis>
    <command>interface6</command>
    <arg choice="plain"><replaceable>...</replaceable></arg>
  </cmdsynopsis>
</refsynopsisdiv>

<refsect1><title>Description</title>
  <para>
    Writing <command>interface</command> or <command>interface4</command>
    applies traffic shaping rules only to IPv4 traffic.
  </para>

  <para>
    Writing <command>interface6</command> applies traffic shaping rules
    only to IPv6 traffic.
  </para>

  <para>
    Writing <command>interface46</command> applies traffic shaping rules
    to both IPv4 and IPv6 traffic.
  </para>

  <para>
    The actual traffic shaping behaviour of a class is defined by adding
    classes. See <xref linkend="qos-class"/>.
  </para>

  <note>
    <para>
      To achieve best results with <emphasis>incoming</emphasis> traffic
      shaping, you should not use 100% of the available bandwidth at the
      interface level.
    </para>

    <para>
      If you use all there is, at 100% utilisation of the link, the
      neighbour routers will start queuing packets. This will destroy
      prioritisation. Try 85% or 90% instead.
    </para>
  </note>
</refsect1>

<refsect1><title>Parameters</title>
  <variablelist>
    <varlistentry><term><replaceable>device</replaceable></term>
      <listitem>
        <para>
          This is the interface name as shown by
          <userinput>ip link show</userinput> (e.g. eth0, ppp1, etc.)
        </para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>name</replaceable></term>
      <listitem>
        <para>
          This is a single-word name for this interface and is used
          for retrieving status information later.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>direction</replaceable></term>
      <listitem>
        <para>
          If set to <option>input</option>,
          traffic coming in to the interface is shaped.
        </para>
        <para>
          If set to <option>output</option>,
          traffic going out via the interface is shaped.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>optional-class-params</replaceable></term>
      <listitem>
        <para>
          For a list of optional class parameters which can be applied
          to an interface, see <xref linkend="qos-class-params"/>.
        </para>
      </listitem>
    </varlistentry>
    <varlistentry><term><replaceable>speed</replaceable></term>
      <listitem>
        <para>
          For an interface, the committed
          <replaceable>speed</replaceable> must be
          specified with the <command>rate</command> option.
          The speed can be expressed in any of the units
          described in <xref linkend="fireqos.conf"/>.
        </para>
      </listitem>
    </varlistentry>
  </variablelist>
</refsect1>

<refsect1><title>Examples</title>
  <para>
    To create an input policy on eth0, capable of delivering up to
    1Gbit of traffic:
    <programlisting>
interface eth0 lan-in input rate 1Gbit
    </programlisting>
  </para>
</refsect1>

<refsect1><title>See Also</title>
  <simplelist type="vert">
    <member><xref linkend="fireqos"/></member>
    <member><xref linkend="fireqos.conf"/></member>
    <member><xref linkend="qos-class-params"/></member>
    <member><xref linkend="qos-class"/></member>
  </simplelist>
</refsect1>

</refentry>
